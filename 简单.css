/* --- 全局自定义属性 (CSS 变量) --- */
:root {
  /* 定义一个平滑的缓动函数，用于动画过渡 */
  --cs-smooth-out: cubic-bezier(0.2, 0.8, 0.4, 1);

  /* 定义中性暗色背景，用于暗色模式 */
  --cs-neutral-dark-shade: rgba(25,25,25,1);

  /* 定义输入框“呼吸”动画效果的初始颜色和透明度 */
  --cs-neutral-breath-color: rgba(255, 255, 255, 0.08);
  
  /* 定义输入框获得焦点时的轮廓颜色 */
  --cs-neutral-focus-color: #A6B0C3; 

  /* 定义亮色模式下输入框的背景色和透明度 */
  --cs-light-input-shade: rgba(248, 250, 252, 0.9);
}

/* --- 输入框呼吸动画 --- */
@keyframes inputBreathNeutral {
  /* 动画开始时，box-shadow 为0，使用呼吸效果颜色 */
  0% { box-shadow: 0 0 0 0 var(--cs-neutral-breath-color); }
  /* 动画进行到70%时，box-shadow 扩散到10px，并完全透明 */
  70% { box-shadow: 0 0 0 10px rgba(255, 255, 255, 0); }
  /* 动画结束时，box-shadow 恢复到0 */
  100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }
}

/* --- 输入框默认样式 --- */
#inputbar {
  /* 背景毛玻璃效果，提供模糊质感 */
  backdrop-filter: blur(12px) !important;

  /* 应用呼吸动画：动画名、时长、缓动函数、无限循环 */
  animation: inputBreathNeutral 3.5s ease-in-out infinite !important;

  /* 为边框颜色和阴影变化添加平滑过渡效果 */
  transition: 
    border-color 0.3s var(--cs-smooth-out),
    box-shadow 0.3s var(--cs-smooth-out) !important;
}

/* --- 暗色模式下的输入框背景 --- */
body[theme-mode='dark'] #inputbar {
  background: var(--cs-neutral-dark-shade) !important;
}

/* --- 亮色模式下的输入框背景 --- */
body[theme-mode='light'] #inputbar {
  background: var(--cs-light-input-shade) !important;
}

/* --- 输入框获得焦点时的样式 --- */
#inputbar:focus-within {
  /* 停止呼吸动画，以提供清晰的视觉反馈 */
  animation: none !important;
  /* 添加一个实心轮廓，突出显示焦点状态 */
  box-shadow: 0 0 0 1.5px var(--cs-neutral-focus-color) !important;
}

/* --- "Claude" 风格主题变量 --- */
:root {
  /* 定义 sans-serif 和等宽字体 */
  --font-sans: 'Inter', -apple-system, system-ui;
  --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
  /* 定义代码块的颜色 */
  --claude-bg: #19191D; /* 背景色 */
  --claude-header-bg: #2A2A31; /* 头部背景色 */
  --claude-border: #3A3A40; /* 边框色 */
  --claude-text: #E5E5E5; /* 文本颜色 */
  --claude-subtext: #A6B0C3; /* 副文本颜色 */
  --claude-scrollbar-thumb: #5F6C84; /* 滚动条滑块颜色 */
}

/* --- 代码块 (<pre>) 容器样式 --- */
pre {
  background: var(--claude-bg) !important;
  border: 1px solid var(--claude-border) !important;
  border-radius: 12px !important;
  margin: 1.5em 0 !important;
  overflow: hidden; /* 隐藏超出圆角的部分 */
  position: relative;
}

/* --- 代码块内部 (<code>) 样式 --- */
pre code {
  display: block;
  padding: 1rem 1.2rem !important;
  font-family: var(--font-mono) !important; /* 使用等宽字体 */
  color: var(--claude-text) !important;
  background: none !important; /* 代码本身无背景色，继承pre的背景 */
  overflow-x: auto; /* 内容超出时，允许水平滚动 */
  max-height: 500px; /* 限制最大高度，超出时会出现垂直滚动条 */
}
